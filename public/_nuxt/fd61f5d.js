(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{408:function(t,e,n){"use strict";n.r(e);var r=n(21),o=(n(87),n(18),n(6),n(36),n(181),n(15),n(55)),c=n.n(o),l={data:function(){return{tasks:[],task:null}},computed:{completedTasks:function(){return this.tasks.filter((function(t){return t.done})).length},progress:function(){return 0===this.tasks.length?0:this.completedTasks/this.tasks.length*100},remainingTasks:function(){return this.tasks.length-this.completedTasks},uid:function(){return this.$store.getters.uid}},methods:{create:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.task,t.tasks.push({done:!1,text:t.task}),t.task=null,r=new Date,e.next=6,c.a.post("https://firestore.googleapis.com/v1/".concat(t.$store.getters.skills[t.$store.getters.skillsIndex].name,"/tasks"),{fields:{name:{stringValue:n},checkbox:{booleanValue:!1},create_at:{timestampValue:r.toISOString()},update_at:{timestampValue:r.toISOString()}}},{headers:{Authorization:"Bearer ".concat(t.$store.getters.idToken)}}).then((function(t){console.log(t)}));case 6:return e.next=8,c.a.get("https://firestore.googleapis.com/v1/".concat(t.$store.getters.skills[t.$store.getters.skillsIndex].name,"/tasks"),{headers:{Authorization:"Bearer ".concat(t.$store.getters.idToken)}}).then((function(e){console.log(e),t.$store.commit("updateTasks",e.data.documents)}));case 8:case"end":return e.stop()}}),e)})))()},deleteTasks:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.tasks.indexOf(t),e.tasks.splice(r,1),n.next=4,c.a.delete("https://firestore.googleapis.com/v1/".concat(e.$store.getters.tasks[r].name),{headers:{Authorization:"Bearer ".concat(e.$store.getters.idToken)}}).then((function(t){console.log(t)}));case 4:case"end":return n.stop()}}),n)})))()},initTasks:function(){var t=this;this.tasks.splice(0,this.tasks.length),this.$store.getters.tasks.forEach((function(e,n){var r={done:e.fields.checkbox.booleanValue,text:e.fields.name.stringValue};t.$set(t.tasks,n,r)}))},patchCheckbox:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.tasks.indexOf(t),n.next=3,c.a.patch("https://firestore.googleapis.com/v1/".concat(e.$store.getters.tasks[r].name)+"?updateMask.fieldPaths=checkbox",{fields:{checkbox:{booleanValue:t.done}}},{headers:{Authorization:"Bearer ".concat(e.$store.getters.idToken)}}).then((function(t){console.log(t)}));case 3:case"end":return n.stop()}}),n)})))()}},created:function(){this.initTasks()},watch:{"$store.state.tasks":function(){this.initTasks()}}},d=n(52),k=n(58),v=n.n(k),h=n(388),m=n(403),f=n(451),x=n(385),_=n(439),T=n(391),V=n(440),C=n(441),y=n(446),w=n(177),$=n(389),O=n(448),component=Object(d.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticStyle:{"max-width":"500px"}},[n("h2",{staticClass:"display-1 white--text pl-3"},[t._v("\n    Tasks: \n    "),n("v-fade-transition",{attrs:{"leave-absolute":""}},[n("span",{key:"tasks-"+t.tasks.length},[t._v("\n        "+t._s(t.tasks.length)+"\n      ")])])],1),t._v(" "),n("v-divider",{staticClass:"mt-3"}),t._v(" "),n("v-layout",{attrs:{"my-1":"","align-center":""}},[n("strong",{staticClass:"mx-3 black--text "},[t._v("\n      進行中: "+t._s(t.remainingTasks)+"\n    ")]),t._v(" "),n("v-divider",{attrs:{vertical:""}}),t._v(" "),n("strong",{staticClass:"mx-3 black--text"},[t._v("\n      完了: "+t._s(t.completedTasks)+"\n    ")]),t._v(" "),n("v-spacer"),t._v(" "),n("v-progress-circular",{staticClass:"mr-2",attrs:{value:t.progress}})],1),t._v(" "),n("v-divider",{staticClass:"mb-3"}),t._v(" "),t.tasks.length>0?n("v-card",[n("v-slide-y-transition",{staticClass:"py-0",attrs:{group:"",tag:"v-list"}},[t._l(t.tasks,(function(e,i){return[0!==i?n("v-divider",{key:i+"-divider"}):t._e(),t._v(" "),n("v-list-item",{key:i+"-"+e.text},[n("v-list-item-action",[n("v-checkbox",{attrs:{color:"info darken-3"},on:{change:function(n){return t.patchCheckbox(e)}},model:{value:e.done,callback:function(n){t.$set(e,"done",n)},expression:"task.done"}},[n("div",{staticClass:"ml-3",class:e.done?"grey--text":"text--primary",attrs:{slot:"label"},domProps:{textContent:t._s(e.text)},slot:"label"})])],1),t._v(" "),n("v-spacer"),t._v(" "),n("v-scroll-x-transition",[e.done?n("i",{staticClass:"mdi mdi-check"}):t._e()]),t._v(" "),n("v-btn",{attrs:{text:"",icon:""},on:{click:function(n){return t.deleteTasks(e)}}},[n("i",{staticClass:"mdi mdi-delete"})])],1)]}))],2)],1):t._e(),t._v(" "),n("br"),t._v(" "),n("v-text-field",{attrs:{label:"Add Task",solo:""},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.create.apply(null,arguments)}},model:{value:t.task,callback:function(e){t.task=e},expression:"task"}},[n("v-fade-transition",{attrs:{slot:"append"},slot:"append"},[t.task?n("i",{staticClass:"mdi mdi-plus",on:{click:t.create}}):t._e()])],1)],1)}),[],!1,null,null,null);e.default=component.exports;v()(component,{VBtn:h.a,VCard:m.a,VCheckbox:f.a,VContainer:x.a,VDivider:_.a,VFadeTransition:T.a,VLayout:V.a,VListItem:C.a,VListItemAction:y.a,VProgressCircular:w.a,VScrollXTransition:T.b,VSlideYTransition:T.d,VSpacer:$.a,VTextField:O.a})}}]);